.main-tabs {
    display       : flex;
    flex-direction: row;
    position      : relative;
    padding-bottom: 3px;
    background    : @color-ui;
    user-select   : none;

    &:not(:empty)::after {
        content   : '';
        height    : 2px;
        display   : block;
        background: @color-ui-light;
        position  : absolute;
        top       : 100%;
        left      : 0;
        width     : 100%;
        margin-top: -3px;
        z-index   : 3;
        border    : 1px solid @color-ui-darkest;
    }

    .tab {
        flex         : 1;
        position     : relative;
        z-index      : 2;
        padding      : 3px 8px 4px;
        max-width    : 180px;
        white-space  : nowrap;
        overflow     : hidden;
        text-overflow: ellipsis;
        border       : 1px solid @color-ui-dark;
        border-bottom: 0;
        margin       : 3px -1px -1px 0;
        text-align   : center;
        background   : @color-ui-light;
        color        : @color-ui-darkest;
        user-select  : none;
        border-top-left-radius: 3px;
        
        + .tab {
            border-top-left-radius: 0;
        }

        &:last-child {
            border-top-right-radius: 3px;
            margin-right: 1px !important;
        }

        &:hover {
            color: @color;
        }

        &.active {
            z-index: 4;
            border-radius: 3px 3px 0 0;
            margin       : 0 -1px -1px 0;
            padding      : 6px 8px 4px;
            color        : @color;
            border-color : @color-ui-darkest;
            background   : linear-gradient(
                lighten(@color-ui-light, 10%),
                @color-ui-light
            );
            box-shadow: 0 2px 1px -2px rgba(255, 255, 255, 0.8) inset,
                        0 10px 0 -8px fade(@color-ui-accent, 40%) inset;
        }

        &.preview {
            font-style: italic;
        }

        // &.modified {
        //     color: @color-ui-accent;
        // }

        .close-tab {
            float        : right;
            display      : inline-block;
            width        : 16px;
            height       : 16px;
            border-radius: 2px;
            margin       : 1px -3px auto 3px;
            font-size    : 14px;
            line-height  : 16px;
            text-align   : center;
            padding      : 0;
            position     : relative;
            z-index      : 2;
            background   : rgba(0, 0, 0, 0);
            color        : @color-ui-dark;
            transition   : all 0.2s;

            &:hover {
                background: rgba(0, 0, 0, 0.3);
                color     : #fff;
            }

            &:active {
                box-shadow: 1px 1px 3px #000 inset;
            }
        }

        &.modified .close-tab:not(:hover) {
            opacity: 1;
            &::before {
                content: '\f14b';
                color  : @color-ui-accent;
            }
        }
    }

    .preview-insert {
        position   : absolute;
        left       : 0;
        top        : 4px;
        bottom     : 4px;
        width      : 2px;
        margin     : 0 0 0 -1px;
        z-index    : 10;
        background : @color-ui-accent;
        font-size  : 16px;
        box-shadow : 0 0 1px 0px #000;
        text-shadow: 0px 0px 1px #000;
        pointer-events: none;
        // transition: transform 0.3s ease;

        &:before {
            content : '\2B07';
            position: absolute;
            top     : -22px;
            left    : -7px;
            color   : @color-ui-accent;
        }

        &:after {
            content : '\2B06';
            position: absolute;
            bottom  : -22px;
            left    : -7px;
            color   : @color-ui-accent;
        }
    }
}

/* DARK THEME --------------------------------------------------------------- */
.dark .main-tabs {
    // background    : linear-gradient(@color-ui-dark, @color-ui);
    // background: @color-ui;

    &::after {
        // background: @color-ui;
        // box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1);
    }
    .tab {
        @bg: mix(@color-ui, @color-ui-light);
        // box-shadow: 0px -1px 0px 1px rgba(0, 0, 0, 0.2),
        //             0 1px 2px -2px rgba(255, 255, 255, 0.5) inset,
        //             0 -17px 16px -7px rgba(0, 0, 0, 0.2) inset;
        background  : @bg;
        color       : rgba(255, 255, 255, 0.3);
        border-color: lighten(@bg, 3%);
        margin      : 3px 0 -1px 1px;
        // text-shadow: 0px -1px 0px #000;

        // &:hover {
        //     background: lighten(#2F3129, 2%);
        //     color: #fff;
        // }

        &.active {
            // border-top: 2px solid rgba(255, 165, 0, 0.4);
            // box-shadow: 0px -1px 0px 1px rgba(0, 0, 0, 0.5),
            //             0 2px 1px -2px rgba(255, 255, 255, 0.8) inset,
            //             0 10px 0 -8px @color-ui-accent inset;
            background: linear-gradient(
                lighten(@color-ui-light, 10%),
                @color-ui-light
            );
            color: #fff;
            text-shadow: 0 1px 0 @color-ui, 0 1px 0 @color-ui;
            border-color : @color-ui-darkest;
            margin       : 0 -1px -1px 0;
            padding      : 6px 9px 4px;

            .close-tab {
                text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2);
            }
        }

        &.modified {
            color: @color-ui-accent;
            text-shadow: 0 1px 0px #000, 0 1px 2px rgba(0, 0, 0, 0.5);
            .close-tab {
                text-shadow: 0 0 1px @color-ui-dark;
            }
        }

        // &.modified .close-tab:not(:hover) {
        //     &::before {
        //         color: orange;
        //         text-shadow: 0px 0px 1px #000;
        //     }
        // }
    }
}
